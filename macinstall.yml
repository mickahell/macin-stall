---

- name: "Macin'stall"
  hosts: all

  vars_files:
    - config.yml

  roles:
    - role: elliotweiser.osx-command-line-tools
    - role: geerlingguy.mac.homebrew
    - role: geerlingguy.dotfiles
      when: dotfiles_configure
    - role: geerlingguy.mac.mas
      when: mas_configure
    - role: python_env
    - role: sublime

  tasks:
    # - import_tasks: tasks/terminal.yml

    # TODO: Use sudo once .osx can be run via root with no user interaction.
    - name: Run .osx dotfiles
      ansible.builtin.command: "{{ osx_script }}"
      changed_when: false
      when: dotfiles_configure
